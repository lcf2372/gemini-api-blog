<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exploring CI/CD and API Testing with the Gemini API</title>
    <style>
        body {
            font-family: "Open Sans", Arial, sans-serif;
            background-color: #1e1e2f;
            color: #ffffff;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #282a36;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            border-radius: 8px;
        }

        h1, h2, h3 {
            margin-top: 30px;
        }

        h1 {
            font-size: 2.8em;
            text-align: center;
            color: #ff79c6;
        }

        h2 {
            font-size: 2em;
            color: #8be9fd;
            border-bottom: 3px solid #6272a4;
            padding-bottom: 5px;
        }

        h3 {
            font-size: 1.5em;
            color: #50fa7b;
        }

        p, li {
            margin: 10px 0;
            line-height: 1.8;
        }

        ul {
            padding-left: 20px;
            margin: 15px 0;
        }

        code {
            background-color: #44475a;
            color: #f1fa8c;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }

        pre {
            background-color: #44475a;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 20px 0;
        }

        blockquote {
            border-left: 5px solid #ff5555;
            margin: 20px 0;
            padding-left: 15px;
            font-style: italic;
            background-color: #333344;
            border-radius: 5px;
            padding: 10px;
        }

        .response {
            background-color: #3b4252;
            color: #d8dee9;
            border-left: 5px solid #88c0d0;
            margin: 15px 0;
            padding: 15px;
            border-radius: 5px;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            font-size: 0.9em;
            color: #6272a4;
        }

        a {
            color: #8be9fd;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Exploring CI/CD and API Testing with the Gemini API</h1>
        <p>Building reliable, scalable applications is a key goal for developers, and one of the most effective ways to achieve this is by implementing a CI/CD (Continuous Integration/Continuous Deployment) pipeline. In this post, I’ll walk you through my journey of developing the Gemini API, testing it, and setting up an automated CI/CD pipeline using GitHub Actions. Along the way, I’ll explain how these tools streamline the development process and ensure that everything works seamlessly.</p>

        <h2>Setting Up the Gemini API</h2>
        <p>The Gemini API I created serves as a simple interface for generating content based on user-provided prompts and instructions. The idea behind the API is simple: users send a request with a prompt, and the API responds with a mock result based on that prompt. This allows for easy testing and showcases how APIs can be used to generate content programmatically.</p>
        <p>The API is built using Flask, a lightweight Python framework that’s perfect for quick, simple applications. We’ve set up a POST endpoint at <code>/generate</code> that accepts two pieces of information from users: a prompt and instructions. Based on this input, the API sends back a response with the processed data.</p>

        <h3>Here’s a quick look at the core function that handles incoming requests:</h3>
        <pre><code>@app.route('/generate', methods=['POST'])
def generate_content():
    data = request.get_json()
    prompt = data.get("prompt")
    instructions = data.get("instructions")
    response = f"This is a mock response based on the prompt: '{prompt}' with instructions: '{instructions}'."
    return jsonify({"response": response})</code></pre>

        <h2>Testing the API Locally</h2>
        <p>Before diving into the CI/CD setup, it’s crucial to make sure the API works as expected. To test it locally, I used <code>curl</code>, a simple yet powerful command-line tool that allows you to send HTTP requests and view responses.</p>
        <p>For example, I used the following curl command to send a POST request to the <code>/generate</code> endpoint:</p>

        <pre><code>curl -X POST http://localhost:5000/generate \
-H "Content-Type: application/json" \
-d "{\"prompt\": \"Write a blog post introduction\", \"instructions\": \"Make it formal and concise.\"}"</code></pre>
        <div class="response">
            <p>Response:</p>
            <pre><code>{
  "response": "This is a mock response based on the prompt: 'Write a blog post introduction' with instructions: 'Make it formal and concise.'"
}</code></pre>
        </div>
        <p>This gave me a mock response, proving that the basic functionality was in place.</p>

        <h2>Setting Up CI/CD with GitHub Actions</h2>
        <p>Once the API was working locally, the next step was to automate testing and integration with GitHub Actions. CI/CD pipelines are essential for automating the testing, building, and deployment processes. With GitHub Actions, I set up a pipeline that automatically triggers whenever changes are pushed to the repository.</p>
        <p>The pipeline is configured to do the following:</p>
        <ul>
            <li>Build the Docker Image: Docker ensures that the API runs the same way on any machine, eliminating environment inconsistencies.</li>
            <li>Run Tests: Although I’ve mocked the actual tests in the pipeline for now, this step will eventually run unit and integration tests automatically.</li>
            <li>CI/CD Automation: The entire process is automated — no more manual testing or deployment steps.</li>
        </ul>
        <p>Here’s what the pipeline configuration looks like in the GitHub Actions workflow file:</p>

        <pre><code>name: CI/CD Pipeline
on:
  push:
    branches:
      - main
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Set up Docker
        uses: docker/setup-buildx-action@v2
      - name: Build Docker image
        run: |
          docker build -t gemini-api .
      - name: Run tests (mocked for now)
        run: |
          echo "Mock testing skipped for now"
      - name: Deploy to production (optional)
        run: |
          echo "Deploying the app..."</code></pre>

        <footer>© 2024. All Rights Reserved.</footer>
    </div>
</body>
</html>
